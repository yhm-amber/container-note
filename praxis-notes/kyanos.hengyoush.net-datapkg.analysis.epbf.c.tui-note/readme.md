[src/gh]: https://github.com/hengyoush/kyanos.git "(Apache-2.0) (Languages: C 95.9%, Go 4.0%, Other 0.1%) Kyanos is a networking analysis tool using eBPF. It can visualize the time packets spend in the kernel, capture requests/responses, makes troubleshooting more efficient. // Kyanos æ˜¯ä¸€æ¬¾ä½¿ç”¨ eBPF çš„ç½‘ç»œåˆ†æå·¥å…·ã€‚å®ƒå¯ä»¥å¯è§†åŒ–æ•°æ®åŒ…åœ¨å†…æ ¸ä¸­èŠ±è´¹çš„æ—¶é—´ï¼Œæ•è·è¯·æ±‚/å“åº”ï¼Œä½¿æ•…éšœæ’é™¤æ›´åŠ é«˜æ•ˆã€‚ /// One command to find slowest requests and identify the reasons. // ä¸€æ¡å‘½ä»¤å³å¯æ‰¾åˆ°æœ€æ…¢çš„è¯·æ±‚å¹¶è¯†åˆ«åŸå› ã€‚ /// Kyanos is an eBPF-based network issue analysis tool that enables you to capture network requests, such as HTTP, Redis, and MySQL requests. // Kyanos æ˜¯ä¸€æ¬¾åŸºäº eBPF çš„ç½‘ç»œé—®é¢˜åˆ†æå·¥å…·ï¼Œå¯ä»¥æ•è·ç½‘ç»œè¯·æ±‚ï¼Œä¾‹å¦‚ HTTPã€Redis å’Œ MySQL è¯·æ±‚ã€‚ /// It also helps you analyze abnormal network issues and quickly troubleshooting without the complex steps of packet capturing, downloading, and analysis. // å®ƒè¿˜å¯ä»¥å¸®åŠ©æ‚¨åˆ†æå¼‚å¸¸ç½‘ç»œé—®é¢˜ï¼Œå¹¶å¿«é€Ÿè¿›è¡Œæ•…éšœæ’é™¤ï¼Œæ— éœ€å¤æ‚çš„æŠ“åŒ…ã€ä¸‹è½½å’Œåˆ†ææ­¥éª¤ã€‚ /// 1. Powerful Traffic Filtering: Not only can filter based on traditional IP/port information, can also filter by process/container, L7 protocol information, request/response byte size, latency, and more. // å¼ºå¤§çš„æµé‡è¿‡æ»¤ï¼šä¸ä»…å¯ä»¥åŸºäºä¼ ç»Ÿçš„ IP/ç«¯å£ä¿¡æ¯è¿›è¡Œè¿‡æ»¤ï¼Œè¿˜å¯ä»¥æ ¹æ®è¿›ç¨‹/å®¹å™¨ã€L7 åè®®ä¿¡æ¯ã€è¯·æ±‚/å“åº”å­—èŠ‚æ•°å¤§å°ã€å»¶è¿Ÿç­‰è¿›è¡Œè¿‡æ»¤ã€‚ ///: (: kyanos watch --pids 1234 # Filter by pid ;: kyanos watch --container-id abc # Filter by container id ;: kyanos watch redis --keys key1,key2 # Filter by Redis key ;: kyanos watch --resp-size 10000 # Filter by response byte size) /// 2. Advanced Analysis Capabilities : Unlike tcpdump, which only provides fine-grained packet capture, Kyanos supports aggregating captured packet metrics across various dimensions, quickly providing the critical data most useful for troubleshooting. // é«˜çº§åˆ†æåŠŸèƒ½ï¼šä¸ä»…æä¾›ç»†ç²’åº¦æ•°æ®åŒ…æ•è·çš„ tcpdump ä¸åŒï¼ŒKyanos æ”¯æŒè·¨å¤šä¸ªç»´åº¦èšåˆæ•è·çš„æ•°æ®åŒ…æŒ‡æ ‡ï¼Œå¿«é€Ÿæä¾›å¯¹æ•…éšœæ’é™¤æœ€æœ‰ç”¨çš„å…³é”®æ•°æ®ã€‚ ///: Imagine if the bandwidth of your HTTP service is suddenly maxed outâ€”how would you quickly analyze which IPs and which  requests are causing it? // æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„ HTTP æœåŠ¡å¸¦å®½çªç„¶è¾¾åˆ°ä¸Šé™â€”â€”ä½ ä¼šå¦‚ä½•å¿«é€Ÿåˆ†æ which IPs å’Œ which  requests å¯¼è‡´è¿™ä¸ªé—®é¢˜ï¼Ÿ ///; With Kyanos, you just need one command: kyanos stat http --bigresp to find the largest response byte sizes sent to remote IPs and view specific data on request and response metrics. // ä½¿ç”¨ Kyanosï¼Œä½ åªéœ€è¦ä¸€ä¸ªå‘½ä»¤ï¼š kyanos stat http --bigresp ï¼Œå³å¯æ‰¾åˆ°å‘é€åˆ°è¿œç¨‹ IP çš„æœ€å¤§å“åº”å­—èŠ‚æ•°ï¼Œå¹¶æŸ¥çœ‹è¯·æ±‚å’Œå“åº”æŒ‡æ ‡çš„å…·ä½“æ•°æ®ã€‚ /// 3. In-Depth Kernel-Level Latency Details: In real-world, slow queries to remote services like Redis can be challenging to diagnose precisely. Kyanos provides kernel trace points from the arrival of requests/responses at the network card to the kernel socket buffer, displaying these details in a visual format. This allows you to identify exactly which stage is causing delays. // æ·±å…¥å†…æ ¸çº§å»¶è¿Ÿç»†èŠ‚ï¼šåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå¯¹ Redis ç­‰è¿œç¨‹æœåŠ¡çš„æ…¢æŸ¥è¯¢å¾€å¾€éš¾ä»¥ç²¾ç¡®è¯Šæ–­ã€‚Kyanos æä¾›ä»è¯·æ±‚/å“åº”åˆ°è¾¾ç½‘å¡åˆ°å†…æ ¸å¥—æ¥å­—ç¼“å†²åŒºçš„å†…æ ¸è·Ÿè¸ªç‚¹ï¼Œä»¥å¯è§†åŒ–æ ¼å¼å±•ç¤ºè¿™äº›ç»†èŠ‚ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿç²¾ç¡®è¯†åˆ«å¯¼è‡´å»¶è¿Ÿçš„é˜¶æ®µã€‚ /// 4. Lightweight and Dependency-Free: Almost zero dependenciesâ€”just a single binary file and one command, with all results displayed in the command line. // è½»é‡çº§ä¸”æ— ä¾èµ–ï¼šå‡ ä¹é›¶ä¾èµ–â€”â€”åªæœ‰ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å’Œä¸€ä¸ªå‘½ä»¤ï¼Œæ‰€æœ‰ç»“æœå‡åœ¨å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºã€‚ /// 5. Automatic SSL Traffic Decryption : All captured requests and responses are presented in plaintext. // è‡ªåŠ¨ SSL æµé‡è§£å¯†ï¼šæ‰€æœ‰æ•è·çš„è¯·æ±‚å’Œå“åº”éƒ½ä»¥æ˜æ–‡å½¢å¼å‘ˆç°ã€‚ /// Examples // ç¤ºä¾‹ /// (: kyanos watch http # Capture HTTP Traffic with Latency Details // æ•è·å¸¦å»¶è¿Ÿè¯¦æƒ…çš„ HTTP æµé‡) (: kyanos watch redis # Capture Redis Traffic with Latency Details // æ•è·å¸¦æœ‰å»¶è¿Ÿè¯¦æƒ…çš„ Redis æµé‡) (: kyanos stat --slow --time 5 # Identify the Slowest Requests in the Last 5 Seconds // è¯†åˆ«è¿‡å» 5 ç§’ä¸­æœ€æ…¢çš„è¯·æ±‚) (: kyanos watch # The simplest usage captures all protocols currently supported by Kyanos // æœ€ç®€å•çš„ä½¿ç”¨æ–¹æ³•æ•è· Kyanos ç›®å‰æ”¯æŒçš„æ‰€æœ‰åè®®) (: kyanos watch http --path /abc # narrow it further to capture traffic for a specific HTTP path // è¿›ä¸€æ­¥ç¼©å°èŒƒå›´ä»¥æ•è·ç‰¹å®š HTTP è·¯å¾„çš„æµé‡) /// ğŸ™‡â€ Special Thanks // ğŸ™‡â€ ç‰¹åˆ«æ„Ÿè°¢ /// During the development of kyanos, some code was borrowed from the following projects: // åœ¨ kyanos çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œéƒ¨åˆ†ä»£ç å€Ÿé‰´äº†ä»¥ä¸‹é¡¹ç›®ï¼š /// - eCapture (. web: ecapture.cc, gh: gojue/ecapture.git) /// - pixie (. gh: pixie-io/pixie.git, web: px.dev) /// - ptcpdump (. gh: mozillazg/ptcpdump.git)"
[site]: https://kyanos.io/ "Kyanos /// A Simple & Powerful Network Tracing Tool // ä¸€ä¸ªç®€å•ä¸”å¼ºå¤§çš„ç½‘ç»œè·Ÿè¸ªå·¥å…· /// Visualize the time packets spend in the kernel, watch & analyze in command line. // å¯è§†åŒ–æ•°æ®åŒ…åœ¨å†…æ ¸ä¸­èŠ±è´¹çš„æ—¶é—´ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è§‚å¯Ÿå’Œåˆ†æã€‚"
[intro/.site]: https://kyanos.io/what-is-kyanos.html "What is kyanos ï¼Ÿ /// Kyanos is a Network Traffic Analyzer that provides real-time, packet-level to protocol-level visibility into a host's internal network, capturing and analyzing all inbound and outbound traffic. // Kyanos æ˜¯ä»€ä¹ˆï¼Ÿ /// Kyanos æ˜¯ä¸€ä¸ªåŸºäº eBPF çš„ç½‘ç»œé—®é¢˜åˆ†æå·¥å…·ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æŠ“å–ä¸šåŠ¡è¯·æ±‚ï¼Œæ¯”å¦‚ HTTP è¯·æ±‚ã€Redis è¯·æ±‚ã€MYSQL è¯·æ±‚ç­‰ï¼Œè¿˜å¯ä»¥å¸®ä½ åˆ†æå¼‚å¸¸é“¾è·¯ï¼Œå¿«é€Ÿæ’æŸ¥ä¸šåŠ¡æ•…éšœï¼Œè€Œä¸éœ€è¦ç¹ççš„æŠ“åŒ…ï¼Œä¸‹è½½ï¼Œåˆ†æç­‰æ­¥éª¤ï¼Œå¹¶ä¸”æ‹¥æœ‰è‰¯å¥½çš„å…¼å®¹æ€§ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ— éœ€ä»»ä½•ä¾èµ–ä¸€è¡Œå‘½ä»¤å³å¯å¼€å§‹åˆ†æã€‚"

