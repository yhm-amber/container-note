[src/gh]: https://github.com/typst/comemo.git "(Apache-2.0, MIT) (Languages: Rust 100.0%) Incremental computation through constrained memoization. // 通过约束记忆化实现增量计算。 /// comemo // 我们庆祝 /// A memoized function caches its return values so that it only needs to be executed once per set of unique arguments. This makes for a great optimization tool. However, basic memoization is rather limited. For more advanced use cases like incremental compilers, it lacks the necessary granularity. Consider, for example, the case of the simple .calc scripting language. Scripts in this language consist of a sum of numbers and eval statements that reference other .calc scripts. // 记忆化函数会缓存其返回值，因此对于每组不同的参数，它只需执行一次。这使其成为一种强大的优化工具。然而，基本的记忆化功能相当有限。对于增量编译器等更高级的用例，它缺乏必要的粒度。例如，考虑一下简单的 .calc 脚本语言。该语言中的脚本由数字求和以及引用其他 .calc 脚本的 eval 语句组成。 /// But what if we want to make this interpreter incremental, meaning that it only recomputes a script's result if it or any of its dependencies change? Basic memoization won't help us with this because the interpreter needs the whole set of files as input—meaning that a change to any file invalidates all memoized results. // 但如果我们想让这个解释器是增量式的，也就是说，只有当脚本本身或其任何依赖项发生更改时才重新计算脚本的结果，该怎么办呢？基本的记忆化对此无济于事，因为解释器需要整套文件作为输入——这意味着对任何文件的更改都会使所有记忆化的结果失效。 /// This is where comemo comes into play. It implements constrained memoization with more fine-grained access tracking. To use it, we can just: // 这就是 comemo 发挥作用的地方。它实现了约束记忆化。 具备更精细的访问跟踪功能。使用方法很简单： /// - Add the #[memoize] attribute to the evaluate function. // 向 evaluate 函数添加 #[memoize] 属性。 /// - Add the #[track] attribute to the impl block of Files. // 将 #[track] 属性添加到 Files 的 impl 块中。 /// - Wrap the files argument in comemo's Tracked container. // 将 files 参数包装在 comemo 的 Tracked 容器中。"
[lib.cargo/crates]: https://crates.io/crates/comemo "(: cargo add -- comemo) (MIT OR Apache-2.0) (1,121 SLoC) (28.3 KiB) Incremental computation through constrained memoization. // 通过约束记忆化实现增量计算。 (src: gh:typst/comemo.git)"
[lib-macros.cargo/crates]: https://crates.io/crates/comemo-macros "(: cargo add -- comemo-macros) (MIT OR Apache-2.0) (523 SLoC) (9.77 KiB) Procedural macros for comemo. // comemo 的过程宏。 (src: gh:typst/comemo.git)"

