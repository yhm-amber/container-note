[src/gh]: https://github.com/robertkrimen/otto.git '(MIT) (Languages: Go 99.8%, Perl 0.2%) A JavaScript interpreter in Go (golang) // Go (golang) 中的 JavaScript 解释器 /// (: import ("github.com/robertkrimen/otto") ;: vm := otto.New() ;: vm.Run(` abc = 2 + 2; console.log(abc); //> 4 `) // Run something in the VM ;: if value, err := vm.Get("abc"); err == nil { if value_int, err := value.ToInteger(); err == nil { fmt.Println(value_int) } else { fmt.Printf("Error during conversion: %v\n", err) } } else { fmt.Printf("Error getting value: %v\n", err) } // Get a value out of the VM ;: vm.Set("def", 11) // Set a number ;: vm.Run(` console.log(def); //> 11 `) ;: vm.Set("xyzzy", "Nothing happens.") // Set a string ;: vm.Run(` console.log(xyzzy.length); //> 16 `) ;: value, _ = vm.Run("xyzzy.length") // Get the value of an expression ;: { value, _ := value.ToInteger() } // value is an int64 with a value of 16 ;: _, err = vm.Run("abcdefghijlmnopqrstuvwxyz.length") // Make an error ;: if err != nil { ... } // err: `ReferenceError: abcdefghijlmnopqrstuvwxyz is not defined` ;: vm.Set("twoPlus", func(call otto.FunctionCall) otto.Value { right, _ := call.Argument(0).ToInteger(); result, _ := vm.ToValue(2 + right); return result }) // Set a Go function ;: vm.Set("sayHello", func (call otto.FunctionCall) otto.Value { fmt.Printf("Hello, %s.\n", call.Argument(0).String()); return otto.Value{} }) // Set a Go function with no returns ;: result, _ = vm.Run(` /* > Hello, Xyzzy. < */ sayHello("Xyzzy"); /* > Hello, undefined. < */ sayHello(); result = twoPlus(2.0); //> 4`) // Use the functions in JavaScript) /// Parser // 解析器 /// A separate parser is available in the parser package if you\'re interested in only building an AST. // 如果你只对构建抽象语法树（AST）感兴趣，那么在 parser 包中有一个单独的解析器可用。 /// (: src := `/* : Sample xyzzy example : */ (function () { if (3.14159 > 0) { console.log("Hello, World."); return; } var xyzzy = NaN; console.log("Nothing happens."); return xyzzy; }) ();` ;: filename := "" // A filename is optional ;: program, err := parser.ParseFile(nil, filename, src, 0) // Parse some JavaScript, yielding a *ast.Program and/or an ErrorList) (: go install -- github.com/robertkrimen/otto/otto@latest ;: otto example.js)'
[main-lib.go/pgd]: https://pkg.go.dev/github.com/robertkrimen/otto "(: go get -- github.com/robertkrimen/otto) (License: MIT) (Imports: 31) (Imported by: 3,027)  (src: gh:robertkrimen/otto.git)"
[parser-lib.go/pgd]: https://pkg.go.dev/github.com/robertkrimen/otto/parser "(: go get -- github.com/robertkrimen/otto/parser) (License: MIT) (Imports: 16) (Imported by: 270)  (src: gh:robertkrimen/otto.git)"
[main-cli.go/pgd]: https://pkg.go.dev/github.com/robertkrimen/otto/otto "(: go install -- github.com/robertkrimen/otto/otto@latest) (License: MIT) (Imports: 7) (Imported by: 0)  (src: gh:robertkrimen/otto.git)"
[knows_by]: https://github.com/dop251/goja.git "This project was largely inspired by otto (. gh: robertkrimen/otto.git). // 该项目主要受 otto 启发。"

