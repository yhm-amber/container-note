[site/ghio]: https://posit-dev.github.io/querychat/ "Chat with your data in any language // 在任何语言中与你的数据聊天 /// A drop-in component for Shiny that allows you to chat with your data using natural language queries. Available for both R and Python. // 一个适用于 Shiny 的即插即用组件，允许你使用自然语言查询与你的数据进行聊天。适用于 R 和 Python。"
[src/gh]: https://github.com/posit-dev/querychat.git "(MIT) (Languages: Python 46.9%, R 46.2%, Makefile 5.4%, Other 1.5%) Chat with your data in R and Python // 在 R 和 Python 中与您的数据聊天 /// Imagine typing questions like these directly into your dashboard, and seeing the results in realtime: // 想象直接在您的仪表板上输入类似这些问题，并实时查看结果： /// - “Show only penguins that are not species Gentoo and have a bill length greater than 50mm.” // “仅显示不是 Gentoo 物种且喙长大于 50 毫米的企鹅。” /// - “Show only blue states with an incidence rate greater than 100 per 100,000 people.” // “仅显示人口每 10 万人中发病率超过 100 的蓝色州。” /// - “What is the average mpg of cars with 6 cylinders?” // “六缸汽车的平均 mpg 是多少？” /// querychat is a drop-in component for Shiny that allows users to query a data frame using natural language. The results are available as a reactive data frame, so they can be easily used from Shiny outputs, reactive expressions, downloads, etc. // querychat 是一个适用于 Shiny 的即插即用组件，允许用户使用自然语言查询数据框。查询结果以反应式数据框的形式提供，因此可以轻松地从 Shiny 输出、反应式表达式、下载等地方使用。 /// ## How it works // 工作原理 /// ### Powered by LLMs // 由 LLMs 驱动 ///: querychat's natural language chat experience is powered by LLMs (like GPT-4o, Claude 3.5 Sonnet, etc.) that support function/tool calling capabilities. // querychat 的自然语言聊天体验由支持函数/工具调用能力的 LLMs（如 GPT-4o、Claude 3.5 Sonnet 等）驱动。 /// ### Powered by SQL // 由 SQL 驱动 ///: querychat doesn't send the raw data to the LLM, asking it to guess summary statistics. Instead, the LLM generates precise SQL queries to filter the data or directly calculate statistics. This is crucial for ensuring relability, transparency, and reproducibility: // querychat 不会将原始数据发送给 LLM，让其猜测汇总统计量。相反，LLM 会生成精确的 SQL 查询来过滤数据或直接计算统计量。这对于确保可靠性、透明性和可重复性至关重要： ///; - Reliability: Today's LLMs are excellent at writing SQL, but bad at direct calculation. // 可靠性：如今的 LLMs 在编写 SQL 方面表现出色，但在直接计算方面表现不佳。 ///; - Transparency: querychat always displays the SQL to the user, so it can be vetted instead of blindly trusted. // 透明度：querychat 始终向用户显示 SQL 语句，以便用户可以对其进行审查，而不是盲目信任。 ///; - Reproducibility: The SQL query can be easily copied and reused. // 可重复性：SQL 查询可以轻松复制和重用。 ///; Currently, querychat uses DuckDB for its SQL engine when working with data frames. For database sources, it uses the native SQL dialect of the connected database. // 目前，querychat 在处理数据框时使用 DuckDB 作为其 SQL 引擎。对于数据库源，它使用连接的数据库的原生 SQL 语法。"
[lib-r.site/.site]: https://posit-dev.github.io/querychat/r/ "(: qc_config <- querychat::querychat_init(mtcars) ;: ui <- bslib::page_sidebar(sidebar = querychat::querychat_sidebar('chat'), DT::DTOutput('dt')) # Alternatively, use `querychat::querychat_ui(id)` elsewhere if you don't want your chat interface to live in a sidebar ;: server <- function(input, output, session) { qc <- querychat_server('chat', qc_config); output$dt <- DT::renderDT({ DT::datatable(qc$df()) }) } ;: shiny::shinyApp(ui, server) # open shiny app) This is not as terrible an idea as you might think! We need to be very careful when bringing LLMs into data analysis, as we all know that they are prone to hallucinations and other classes of errors. querychat is designed to excel in reliability, transparency, and reproducibility by using this one technique: denying it raw access to the data, and forcing it to write SQL queries instead. See the section below on “How it works” for more. // 这并没有你想象的那么糟糕！在将 LLMs 引入数据分析时，我们需要非常小心，因为众所周知，它们容易产生幻觉和其他类型的错误。querychat 通过使用这一技术来卓越地实现可靠性、透明性和可重复性：拒绝它直接访问数据，并强制它编写 SQL 查询。有关更多信息，请参阅下方的“工作原理”部分。"
[lib-py.site/.site]: https://posit-dev.github.io/querychat/py/ "(: titanic = seaborn.load_dataset('titanic') ;: def models(sys_prompt: str) -> chatlas.Chat: return chatlas.ChatGithub(model='gpt-4.1', system_prompt=sys_prompt) ;: qc_config = querychat.init(data_source=titanic, table_name='titanic', client=models) ;: ... # Create Shiny UI by `shiny.ui.page_sidebar` as `app_ui` obj ;: ... # Define server logic by `qc_config` and `shiny.render` as `server` func ;: app = shiny.App(app_ui, server) # Create Shiny app"
[lib-r.pak/gh]: https://github.com/posit-dev/querychat/tree/main/pkg-r "(: pak::pak('posit-dev/querychat/pkg-r')) (Package: querychat) (Title: Filter and Query Data Frames in 'shiny' Using an LLM Chat Interface // 使用 LLM 聊天界面在 Shiny 中筛选和查询数据框) (Version: 0.0.1.9000) (Authors@R: c(person('Joe', 'Cheng', , 'joe@posit.co', role = c('aut', 'cre')), person('Posit Software, PBC', role = c('cph', 'fnd')))) (Description: Adds an LLM-powered chatbot to your 'shiny' app, that can turn your users' natural language questions into SQL queries that run against your data, and return the result as a reactive dataframe. Use it to drive reactive calculations, visualizations, downloads, etc. // 为您的 Shiny 应用添加一个基于 LLM 的聊天机器人，它可以将用户的自然语言问题转换为针对您数据的 SQL 查询，并将结果以响应式数据框的形式返回。您可以使用它来驱动响应式计算、可视化、下载等操作。) (License: MIT + file LICENSE) (Depends: R (>= 4.1.0)) (Imports: bslib, DBI, duckdb, ellmer (>= 0.3.0), htmltools, lifecycle, promises, purrr, rlang, shiny, shinychat (>= 0.2.0.9000), utils, whisker, xtable) (Suggests: bsicons, DT, palmerpenguins, R6, RSQLite, shinytest2, testthat (>= 3.0.0), withr) (Remotes: posit-dev/shinychat/pkg-r) querychat: Chat with Shiny apps (R) // querychat：使用 Shiny 应用程序（R）进行聊天 (src: gh:posit-dev/querychat.git)"
[lib-py.pip/pypi]: https://pypi.org/project/querychat/ "(: pip install -- querychat) (License: # MIT License) (Requires: Python >=3.9) Chat with your data using natural language // 使用自然语言与您的数据聊天 (src: gh:posit-dev/querychat.git)"


[demo:sidebot.shiny/jcheng.shinyapps.io]: https://jcheng.shinyapps.io/sidebot/ "Restaurant tipping // 餐厅小费"
[demo:sidebot.r.shiny.src/gh.jcheng]: https://github.com/jcheng5/r-sidebot.git "(Languages: R 84.1%, CSS 8.6%, Shell 7.3%) This is a demonstration of using an LLM to enhance a data dashboard written in Shiny, via the querychat package. // 这是一个使用 LLM 通过 querychat 包增强用 Shiny 编写的数据仪表板的演示。 /// This app sends at least your data schema to a remote LLM. As written, it also permits the LLM to run SQL queries against your data and get the results back. Please keep these facts in mind when dealing with sensitive data. // 该应用至少会将您的数据模式发送到远程 LLM。按照当前编写的方式，它还允许 LLM 对您的数据进行 SQL 查询并返回结果。在处理敏感数据时，请牢记这些事实。"
[demo:sidebot.py.shiny.src/gh.jcheng]: https://github.com/jcheng5/py-sidebot.git "(Languages: Python 94.8%, CSS 5.2%) This is a demonstration of using an LLM to enhance a data dashboard written in Shiny, via the querychat package. // 这是一个使用 LLM 通过 querychat 包增强用 Shiny 编写的数据仪表板的演示。 /// This app sends at least your data schema to a remote LLM. As written, it also permits the LLM to run SQL queries against your data and get the results back. Please keep these facts in mind when dealing with sensitive data. // 该应用至少会将您的数据模式发送到远程 LLM。按照当前编写的方式，它还允许 LLM 对您的数据进行 SQL 查询并返回结果。在处理敏感数据时，请牢记这些事实。"




[knows_by]: https://posit-dev.github.io/mcptools/ "Register third-party MCP servers with ellmer chats to integrate additional context into e.g. shinychat (. gh: posit-dev/shinychat.git) and querychat (. gh: posit-dev/querychat.git) apps. // 通过 ellmer 聊天注册第三方 MCP 服务器，以将额外上下文集成到例如 shinychat 和 querychat 应用中。"
