[src/gh]: https://github.com/orhun/kmon.git "(GPL-3.0) (Languages: Rust 97.8%, Dockerfile 1.2%, Other 1.0%) Linux Kernel Manager and Activity Monitor ğŸ§ğŸ’» // Linux å†…æ ¸ç®¡ç†å™¨å’Œæ´»åŠ¨ç›‘è§†å™¨ ğŸ§ğŸ’» (: kmon --color 6f849c --accent-color e35760)"
[info.git/codecov]: https://app.codecov.io/gh/orhun/kmon ""
[pkg.x/x-cmd]: https://x-cmd.com/install/kmon "(: xd alp -- kmon) (: x install -- kmon)"
[pkg.cargo/crates]: https://crates.io/crates/kmon "(: cargo install -- kmon) (GPL-3.0) (51.3 KiB)"
[pkg.oci/ghcr]: https://github.com/orhun/kmon/pkgs/container/kmon%2Fkmon "(: docker run -it --cap-add syslog -- ghcr.io/orhun/kmon/kmon)"
[site]: https://kmon.cli.rs/ "The kernel is the part of the operating system that facilitates interactions between hardware and software components. On most systems, it is loaded on startup after the bootloader and handles I/O requests as well as peripherals like keyboards, monitors, network adapters, and speakers. Typically, the kernel is responsible for memory management, process management, device management, system calls, and security. Applications use the system call mechanism for requesting a service from the operating system and most of the time, this request is passed to the kernel using a library provided by the operating system to invoke the related kernel function. While the kernel performs these low-level tasks, itâ€™s resident on a separate part of memory named protected kernel space which is not accessible by applications and other parts of the system. In contrast, applications like browsers, text editors, window managers or audio/video players use a different separate area of the memory, user space. This separation prevents user data and kernel data from interfering with each other and causing instability and slowness, as well as preventing malfunctioning application programs from crashing the entire operating system. // å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£ä¿ƒè¿›ç¡¬ä»¶å’Œè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„äº¤äº’ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå†…æ ¸åœ¨å¼•å¯¼åŠ è½½ç¨‹åºä¹‹åå¯åŠ¨æ—¶åŠ è½½ï¼Œå¹¶å¤„ç†è¾“å…¥/è¾“å‡ºè¯·æ±‚ä»¥åŠé”®ç›˜ã€æ˜¾ç¤ºå™¨ã€ç½‘ç»œé€‚é…å™¨å’Œæ‰¬å£°å™¨ç­‰å¤–å›´è®¾å¤‡ã€‚é€šå¸¸ï¼Œå†…æ ¸è´Ÿè´£å†…å­˜ç®¡ç†ã€è¿›ç¨‹ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€ç³»ç»Ÿè°ƒç”¨å’Œå®‰å…¨ã€‚åº”ç”¨ç¨‹åºä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æœºåˆ¶æ¥è¯·æ±‚æ“ä½œç³»ç»Ÿçš„æœåŠ¡ï¼Œè€Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¯·æ±‚é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„åº“ä¼ é€’ç»™å†…æ ¸ä»¥è°ƒç”¨ç›¸å…³çš„å†…æ ¸å‡½æ•°ã€‚è™½ç„¶å†…æ ¸æ‰§è¡Œè¿™äº›ä½çº§ä»»åŠ¡ï¼Œä½†å®ƒé©»ç•™åœ¨åä¸ºå—ä¿æŠ¤å†…æ ¸ç©ºé—´çš„å†…å­˜çš„ä¸åŒéƒ¨åˆ†ï¼Œè¯¥ç©ºé—´å¯¹åº”ç”¨ç¨‹åºå’Œå…¶ä»–ç³»ç»Ÿéƒ¨åˆ†ä¸å¯è®¿é—®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæµè§ˆå™¨ã€æ–‡æœ¬ç¼–è¾‘å™¨ã€çª—å£ç®¡ç†å™¨æˆ–éŸ³é¢‘/è§†é¢‘æ’­æ”¾å™¨ç­‰åº”ç”¨ç¨‹åºä½¿ç”¨å†…å­˜çš„ä¸åŒç‹¬ç«‹åŒºåŸŸï¼Œå³ç”¨æˆ·ç©ºé—´ã€‚ è¿™ç§åˆ†ç¦»é˜²æ­¢äº†ç”¨æˆ·æ•°æ®å’Œå†…æ ¸æ•°æ®ç›¸äº’å¹²æ‰°ï¼Œå¯¼è‡´ä¸ç¨³å®šå’Œç¼“æ…¢ï¼ŒåŒæ—¶ä¹Ÿé˜²æ­¢äº†åŠŸèƒ½å¼‚å¸¸çš„åº”ç”¨ç¨‹åºå´©æºƒæ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚ /// There are different kernel designs due to the different ways of managing system calls and resources. For example, while monolithic kernels run all the operating system instructions in the same address space for speed, microkernels use different spaces for user and kernel services for modularity. Apart from those, there are hybrid kernels, nanokernels, and, exokernels. The hybrid kernel architecture is based on combining aspects of microkernel and monolithic kernels. // ç”±äºç³»ç»Ÿè°ƒç”¨å’Œèµ„æºç®¡ç†æ–¹å¼ä¸åŒï¼Œå­˜åœ¨ä¸åŒçš„å†…æ ¸è®¾è®¡ã€‚ä¾‹å¦‚ï¼Œè™½ç„¶å•ä½“å†…æ ¸ä¸ºäº†é€Ÿåº¦å°†æ‰€æœ‰æ“ä½œç³»ç»ŸæŒ‡ä»¤è¿è¡Œåœ¨åŒä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œå¾®å†…æ ¸åˆ™ä½¿ç”¨ä¸åŒçš„ç©ºé—´æ¥åŒºåˆ†ç”¨æˆ·å’Œå†…æ ¸æœåŠ¡ï¼Œä»¥å®ç°æ¨¡å—åŒ–ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ··åˆå†…æ ¸ã€çº³ç±³å†…æ ¸å’Œå¤–éƒ¨å†…æ ¸ã€‚æ··åˆå†…æ ¸æ¶æ„åŸºäºç»“åˆå¾®å†…æ ¸å’Œå•ä½“å†…æ ¸çš„æŸäº›æ–¹é¢ã€‚ /// The Linux kernel is the open-source, monolithic and, Unix-like operating system kernel that used in the Linux distributions, various embedded systems such as routers and as well as in the all Android-based systems. Linus Torvalds conceived and created the Linux kernel in 1991 and itâ€™s still being developed by thousands of developers today. Itâ€™s a prominent example of free and open source software and itâ€™s used in other free software projects, notably the GNU operating system. Although the Linux-based operating systems dominate the most of computing, it still carries some of the design flaws which were quite a bit of debate in the early days of Linux. For example, it has the largest footprint and the most complexity over the other types of kernels. But itâ€™s a design feature that monolithic kernels inherent to have. These kind of design issues led developers to add new features and mechanisms to the Linux kernel which other kernels donâ€™t have. // Linux å†…æ ¸æ˜¯ä¸€ä¸ªå¼€æºçš„ã€å®å†…æ ¸ï¼Œå¹¶ä¸”ç±» Unix çš„æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œç”¨äº Linux å‘è¡Œç‰ˆã€å„ç§åµŒå…¥å¼ç³»ç»Ÿï¼ˆå¦‚è·¯ç”±å™¨ï¼‰ä»¥åŠæ‰€æœ‰åŸºäº Android çš„ç³»ç»Ÿã€‚Linus Torvalds åœ¨ 1991 å¹´æ„æ€å¹¶åˆ›å»ºäº† Linux å†…æ ¸ï¼Œè‡³ä»Šä»ç”±æˆåƒä¸Šä¸‡çš„å¼€å‘è€…è¿›è¡Œå¼€å‘ã€‚å®ƒæ˜¯è‡ªç”±å’Œå¼€æºè½¯ä»¶çš„çªå‡ºèŒƒä¾‹ï¼Œä¹Ÿè¢«ç”¨äºå…¶ä»–è‡ªç”±è½¯ä»¶é¡¹ç›®ï¼Œå°¤å…¶æ˜¯ GNU æ“ä½œç³»ç»Ÿã€‚å°½ç®¡åŸºäº Linux çš„æ“ä½œç³»ç»Ÿä¸»å¯¼äº†å¤§éƒ¨åˆ†è®¡ç®—ï¼Œä½†å®ƒä»ç„¶å­˜åœ¨ä¸€äº›æ—©æœŸ Linux æ—¶ä»£å°±å¼•èµ·å¹¿æ³›è®¨è®ºçš„è®¾è®¡ç¼ºé™·ã€‚ä¾‹å¦‚ï¼Œå®ƒæ‹¥æœ‰æœ€å¤§çš„å ç”¨ç©ºé—´å’Œæœ€å¤šçš„å¤æ‚æ€§ï¼Œè¶…è¿‡å…¶ä»–ç±»å‹çš„å†…æ ¸ã€‚ä½†è¿™æ˜¯ä¸€ç§å®å†…æ ¸å›ºæœ‰çš„è®¾è®¡ç‰¹å¾ã€‚è¿™ç±»è®¾è®¡é—®é¢˜ä¿ƒä½¿å¼€å‘è€…å‘ Linux å†…æ ¸æ·»åŠ äº†å…¶ä»–å†…æ ¸æ‰€æ²¡æœ‰çš„æ–°åŠŸèƒ½å’Œæœºåˆ¶ã€‚ /// Unlike the standard monolithic kernels, the Linux kernel is also modular, accepting loadable kernel modules (LKM) that typically used to add support for new hardware (as device drivers) and/or filesystems, or for adding system calls. Since LKMs could be loaded and unloaded to the system at runtime, they have the advantage of extending the kernel without rebooting and re-compiling. Thus, the kernel functionalities provided by modules would not reside in memory without being used and the related module can be unloaded in order to free memory and other resources. // ä¸æ ‡å‡†çš„å•ä½“å†…æ ¸ä¸åŒï¼ŒLinux å†…æ ¸ä¹Ÿæ˜¯æ¨¡å—åŒ–çš„ï¼Œå®ƒæ¥å—å¯åŠ è½½å†…æ ¸æ¨¡å—ï¼ˆLKMï¼‰ï¼Œè¿™äº›æ¨¡å—é€šå¸¸ç”¨äºæ·»åŠ å¯¹æ–°ç¡¬ä»¶ï¼ˆå¦‚è®¾å¤‡é©±åŠ¨ç¨‹åºï¼‰å’Œ/æˆ–æ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒï¼Œæˆ–ç”¨äºæ·»åŠ ç³»ç»Ÿè°ƒç”¨ã€‚ç”±äº LKM å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½å’Œå¸è½½åˆ°ç³»ç»Ÿä¸­ï¼Œå› æ­¤å®ƒä»¬å…·æœ‰åœ¨ä¸é‡å¯å’Œé‡æ–°ç¼–è¯‘çš„æƒ…å†µä¸‹æ‰©å±•å†…æ ¸çš„ä¼˜åŠ¿ã€‚å› æ­¤ï¼Œæœªä½¿ç”¨çš„æ¨¡å—æä¾›çš„å†…æ ¸åŠŸèƒ½ä¸ä¼šé©»ç•™åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”ç›¸å…³æ¨¡å—å¯ä»¥å¸è½½ä»¥é‡Šæ”¾å†…å­˜å’Œå…¶ä»–èµ„æºã€‚ /// Loadable kernel modules are located in /lib/modules with the .ko (kernel object) extension in Linux. While the lsmod command could be used for listing the loaded kernel modules, modprobe or insmod/rmmod is used for loading or unloading a kernel module. insmod/rmmod are used for modules independent of modprobe and without requiring an installation to /lib/modules/$(uname -r). // åœ¨ Linux ä¸­ï¼Œå¯åŠ è½½å†…æ ¸æ¨¡å—ä½äºä»¥ /lib/modules ï¼ˆå†…æ ¸å¯¹è±¡ï¼‰æ‰©å±•åå‘½åçš„ .ko ç›®å½•ä¸­ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ lsmod å‘½ä»¤åˆ—å‡ºå·²åŠ è½½çš„å†…æ ¸æ¨¡å—ï¼Œä½† modprobe æˆ– insmod/rmmod ç”¨äºåŠ è½½æˆ–å¸è½½å†…æ ¸æ¨¡å—ã€‚insmod/rmmod ç”¨äºç‹¬ç«‹äº modprobe ä¸”æ— éœ€å®‰è£…åˆ° /lib/modules/$(uname -r) çš„æ¨¡å—ã€‚ /// kmon provides a text-based user interface for managing the Linux kernel modules and monitoring the kernel activities. By managing, it means loading, unloading, blacklisting and showing the information of a module. These updates in the kernel modules, logs about the hardware and other kernel messages can be tracked with the real-time activity monitor in kmon. Since the usage of different tools like dmesg and kmod are required for these tasks in Linux, kmon aims to gather them in a single terminal window and facilitate the usage as much as possible while keeping the functionality. // kmon æä¾›äº†ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„ç”¨æˆ·ç•Œé¢ï¼Œç”¨äºç®¡ç† Linux å†…æ ¸æ¨¡å—å¹¶ç›‘æ§å†…æ ¸æ´»åŠ¨ã€‚é€šè¿‡ç®¡ç†ï¼Œå®ƒæŒ‡çš„æ˜¯åŠ è½½ã€å¸è½½ã€é»‘åå•æ˜¾ç¤ºæ¨¡å—ä¿¡æ¯ã€‚è¿™äº›å†…æ ¸æ¨¡å—çš„æ›´æ–°ã€ç¡¬ä»¶ç›¸å…³çš„æ—¥å¿—ä»¥åŠå…¶ä»–å†…æ ¸æ¶ˆæ¯å¯ä»¥é€šè¿‡ kmon ä¸­çš„å®æ—¶æ´»åŠ¨ç›‘æ§å™¨è¿›è¡Œè·Ÿè¸ªã€‚ç”±äºåœ¨ Linux ä¸­æ‰§è¡Œè¿™äº›ä»»åŠ¡éœ€è¦ä½¿ç”¨ä¸åŒçš„å·¥å…·ï¼Œå¦‚ dmesg å’Œ kmodï¼Œå› æ­¤ kmon æ—¨åœ¨å°†å®ƒä»¬æ±‡é›†åˆ°ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œå¹¶åœ¨ä¿æŒåŠŸèƒ½æ€§çš„åŒæ—¶å°½å¯èƒ½ç®€åŒ–ä½¿ç”¨ã€‚ /// kmon is written in Rust and uses Ratatui & termion libraries for its text-based user interface. // kmon æ˜¯ç”¨ Rust ç¼–å†™çš„ï¼Œå¹¶ä½¿ç”¨ Ratatui & termion åº“æ¥å®ç°å…¶åŸºäºæ–‡æœ¬çš„ç”¨æˆ·ç•Œé¢ã€‚"
