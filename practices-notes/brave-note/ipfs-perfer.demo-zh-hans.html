<html><head>
  <meta charset="utf-8">
  <meta name="theme-color" content="#fff">
  <title>IPFS 首选项</title>
  <style>body {
  margin: 0px;
  height: 100%;
  background: #FAF9FE;
}

.interstitial-wrapper {
  text-align: center;
  padding-bottom: 60px;
  position: relative;
  z-index: 1;
}

.interstitial-wrapper span, p, button {
  color: #212529;
  letter-spacing: .5px;
  font-family: Poppins, sans-serif;
}

.header-logo {
  margin: 60px 0 30px 0;
}

.heading {
  font-size: 20px;
  line-height: 30px;
  font-weight: 600;
  display: block;
  margin-bottom: 15px;
}

.copy {
  border-radius: 15px;
  font-size: 14px;
  line-height: 20px;
  max-width: 600px;
  margin: 0 auto;
}

.info-link {
  display: inline-block;
}

.nav-wrapper {
  max-width: 725px;
  margin: 15px auto 0 auto;
}

.control-box {
  background: #fff;
  border-radius: 16px;
  margin-top: 20px;
  display: flex;
  align-items: center;
  height: 100px;
}

.button-wrapper {
  width: 35%;
  float: left;
}

.button {
  border-radius: 100px;
  font-weight: 600;
  font-size: 13px;
  width: 200px;
  word-wrap: break-word;
  cursor: pointer;
}

.button-retry {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNi45NTgzIDQuOTAxNzVDMTcuMjE4MyA1LjI4MTc1IDE3LjExOTEgNS44MDAwOCAxNi43MzkxIDYuMDU5MjVDMTYuMzU5MSA2LjMxODQyIDE1LjgzOTkgNi4yMjA5MiAxNS41ODA4IDUuODQwOTJDMTQuMTk3NCAzLjgxMDkyIDExLjY4MDggMi41MDAwOCA5LjE2OTExIDIuNTAwMDhDNS4wMzI0NCAyLjUwMDA4IDEuNjY3NDQgNS44NjUwOCAxLjY2NzQ0IDEwLjAwMDFDMS42Njc0NCAxNC4xMzUxIDUuMDMyNDQgMTcuNTAwMSA5LjE2OTExIDE3LjUwMDFDMTMuMTM2NiAxNy41MDAxIDE2LjM4NjYgMTQuNDAyNiAxNi42NDU4IDEwLjUwMDlMMTQuNTc4MyAxMS42ODQyQzE0LjE3OTEgMTEuOTExNyAxMy42Njk5IDExLjc3MzQgMTMuNDQxNiAxMS4zNzQyQzEzLjIxMjQgMTAuOTc0MiAxMy4zNTA4IDEwLjQ2NTkgMTMuNzUwOCAxMC4yMzY3TDE2Ljg4NTggOC40NDM0MkMxNy4wNzkxIDguMzMyNTggMTcuMzA4MyA4LjMwNDI1IDE3LjUyMjQgOC4zNjM0MkMxNy43Mzc0IDguNDIyNTggMTcuOTE5MSA4LjU2NTkyIDE4LjAyNzQgOC43NjAwOEwxOS44OTMzIDEyLjA5MzRDMTkuOTY1OCAxMi4yMjE3IDE5Ljk5OTkgMTIuMzYxNyAxOS45OTk5IDEyLjQ5OTJDMTkuOTk5OSAxMi43OTE3IDE5Ljg0NTggMTMuMDc0MiAxOS41NzMzIDEzLjIyNzZDMTkuMTcxNiAxMy40NTI2IDE4LjY2MzMgMTMuMzA4NCAxOC40MzkxIDEyLjkwNjdMMTguMDU0OSAxMi4yMjE3QzE3LjA1NzQgMTYuMjA0MiAxMy40NTc0IDE5LjE2NjcgOS4xNjkxMSAxOS4xNjY3QzQuMTEzMjcgMTkuMTY2NyAtNi4xMDM1MmUtMDUgMTUuMDU0MiAtNi4xMDM1MmUtMDUgMTAuMDAwMUMtNi4xMDM1MmUtMDUgNC45NDU5MiA0LjExMzI3IDAuODMzNDE2IDkuMTY5MTEgMC44MzM0MTZDMTIuMjE1OCAwLjgzMzQxNiAxNS4yNzMzIDIuNDMwMDggMTYuOTU4MyA0LjkwMTc1WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==');
  background-repeat: no-repeat;
  background-size: 18px;
  background-position: left 20% top 50%;
  cursor: pointer;
}

#local-node-button {
  color: #fff;
  border: none;
  background-color: #FB542B;
  padding: 10px 30px;
}

#public-gateway-button {
  background: inherit;
  border: 1px solid #AEB1C2;
  padding: 10px 24px;
}

.copy-wrapper {
  width: 65%;
  float: right;
  text-align: left;
}

.copy-wrapper p {
  font-size: 12px;
  line-height: 18px;
}

.footer {
  margin-top: 20px;
}

.background-container {
  box-sizing: border-box;
  width: 100%;
  height: 136px;
  bottom: 0px;
  position:fixed;
}

.background {
  box-sizing: border-box;
  background: url('data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQ0MCAxMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0tMSAyczM3Mi41NDcgOTQgNzI2IDk0YzM1My40NSAwIDcxNS05NCA3MTUtOTR2MTM0SC0xVjJ6IiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBmaWx0ZXI9InVybCgjZmlsdGVyMF9kKSIvPgogIDxkZWZzPgogICAgPGZpbHRlciBpZD0iZmlsdGVyMF9kIiB4PSItNSIgeT0iMCIgd2lkdGg9IjE0NDkiIGhlaWdodD0iMTQyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CiAgICAgIDxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CiAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIvPgogICAgICA8ZmVPZmZzZXQgZHk9IjIiLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMiIvPgogICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMiAwIi8+CiAgICAgIDxmZUJsZW5kIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvdyIvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz4KICAgIDwvZmlsdGVyPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iLTEwMi41IiB5MT0iLTQzLjI3IiB4Mj0iMTMwMS45MSIgeTI9IjgwLjE3MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMzkyREQxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E5MUI3OCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM5RDFEODIiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgo8L3N2Zz4K');
  width: 100%;
  height: 136px;
  background-size: cover;
  background-position-x: center;
}

/* Dark theme styles */
body.dark {
  background: #17171F;
}

.dark *,
.dark > .interstitial-wrapper span {
  color: #F0F2FF;
  letter-spacing: .5px;
  font-family: Poppins, sans-serif;
}

.dark .control-box {
  background: #1E2029;
}

.dark #local-node-button {
  background: #FB542B;
}

.error-container-hidden {
  display: none
}

.error-container-visible {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNCAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE0QzMuMTQwMDggMTQgMCAxMC44NTk5IDAgN0MwIDMuMTQwMDggMy4xNDAwOCAwIDcgMEMxMC44NTk5IDAgMTQgMy4xNDAwOCAxNCA3QzE0IDEwLjg1OTkgMTAuODU5OSAxNCA3IDE0Wk03IDExLjA4MzNDNi44NDgzMyAxMS4wODMzIDYuNjk2NjcgMTEuMDE5MiA2LjU4NTgzIDEwLjkxNDJDNi40ODAyNSAxMC44MDMzIDYuNDE2NjcgMTAuNjUxNyA2LjQxNjY3IDEwLjVDNi40MTY2NyAxMC4zNDI1IDYuNDgwMjUgMTAuMTk2NyA2LjU4NTgzIDEwLjA4NThDNi44MDE2NyA5Ljg3IDcuMTkyNSA5Ljg3IDcuNDE0MTcgMTAuMDg1OEM3LjUxOTE3IDEwLjE5NjcgNy41ODMzMyAxMC4zNDI1IDcuNTgzMzMgMTAuNUM3LjU4MzMzIDEwLjY1MTcgNy41MTkxNyAxMC44MDMzIDcuNDE0MTcgMTAuOTE0MkM3LjMwMzMzIDExLjAxOTIgNy4xNTE2NyAxMS4wODMzIDcgMTEuMDgzM1pNNyA4Ljc1QzYuNjc3NDIgOC43NSA2LjQxNjY3IDguNDg4NjcgNi40MTY2NyA4LjE2NjY3VjMuNUM2LjQxNjY3IDMuMTc4IDYuNjc3NDIgMi45MTY2NyA3IDIuOTE2NjdDNy4zMjI1OCAyLjkxNjY3IDcuNTgzMzMgMy4xNzggNy41ODMzMyAzLjVWOC4xNjY2N0M3LjU4MzMzIDguNDg4NjcgNy4zMjI1OCA4Ljc1IDcgOC43NVoiIGZpbGw9IiNCRDE1MzEiLz4KPC9zdmc+Cg==');
  background-repeat: no-repeat;
  background-position: left 25px top 2px;

  display: block;
  color: red;
  margin-top: 10px;
  padding: 0px 40px;
  padding-left: 45px;
  text-align: left;
}

</style>
  <script>// Copyright 2013 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

/**
 * @fileoverview Assertion support.
 */

/**
 * Note: This method is deprecated. Use the equvalent method in assert_ts.ts
 * instead.
 * Verify |condition| is truthy and return |condition| if so.
 * @template T
 * @param {T} condition A condition to check for truthiness.  Note that this
 *     may be used to test whether a value is defined or not, and we don't want
 *     to force a cast to Boolean.
 * @param {string=} opt_message A message to show on failure.
 * @return {T} A non-null |condition|.
 * @closurePrimitive {asserts.truthy}
 * @suppress {reportUnknownTypes} because T is not sufficiently constrained.
 */
export function assert(condition, opt_message) {
  if (!condition) {
    let message = 'Assertion failed';
    if (opt_message) {
      message = message + ': ' + opt_message;
    }
    const error = new Error(message);
    const global = function() {
      const thisOrSelf = this || self;
      /** @type {boolean} */
      thisOrSelf.traceAssertionsForTesting;
      return thisOrSelf;
    }();
    if (global.traceAssertionsForTesting) {
      console.warn(error.stack);
    }
    throw error;
  }
  return condition;
}

/**
 * Note: This method is deprecated. Use the equvalent method in assert_ts.ts
 * instead.
 * Call this from places in the code that should never be reached.
 *
 * For example, handling all the values of enum with a switch() like this:
 *
 *   function getValueFromEnum(enum) {
 *     switch (enum) {
 *       case ENUM_FIRST_OF_TWO:
 *         return first
 *       case ENUM_LAST_OF_TWO:
 *         return last;
 *     }
 *     assertNotReached();
 *     return document;
 *   }
 *
 * This code should only be hit in the case of serious programmer error or
 * unexpected input.
 *
 * @param {string=} message A message to show when this is hit.
 * @closurePrimitive {asserts.fail}
 */
export function assertNotReached(message) {
  assert(false, message || 'Unreachable code hit');
}

/**
 * @param {*} value The value to check.
 * @param {function(new: T, ...)} type A user-defined constructor.
 * @param {string=} message A message to show when this is hit.
 * @return {T}
 * @template T
 */
export function assertInstanceof(value, type, message) {
  // We don't use assert immediately here so that we avoid constructing an error
  // message if we don't have to.
  if (!(value instanceof type)) {
    assertNotReached(
        message ||
        'Value ' + value + ' is not a[n] ' + (type.name || typeof type));
  }
  return value;
}

</script>
  <script>// Copyright 2012 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

/* @filedescription Minimal utils and assertion support for places in the code
 * that are still not updated to JS modules. Do not use in new code; use the JS
 * modules (and more extensive) util.js, assert.js (for JS code), and
 * assert_ts.ts (for TS code) instead. */

/**
 * Note: This method is deprecated. Use the equivalent method in assert_ts.ts
 * instead.
 * Verify |condition| is truthy and return |condition| if so.
 * @template T
 * @param {T} condition A condition to check for truthiness.  Note that this
 *     may be used to test whether a value is defined or not, and we don't want
 *     to force a cast to Boolean.
 * @param {string=} opt_message A message to show on failure.
 * @return {T} A non-null |condition|.
 * @closurePrimitive {asserts.truthy}
 * @suppress {reportUnknownTypes} because T is not sufficiently constrained.
 */
function assert(condition, opt_message) {
  if (!condition) {
    let message = 'Assertion failed';
    if (opt_message) {
      message = message + ': ' + opt_message;
    }
    const error = new Error(message);
    const global = function() {
      const thisOrSelf = this || self;
      /** @type {boolean} */
      thisOrSelf.traceAssertionsForTesting;
      return thisOrSelf;
    }();
    if (global.traceAssertionsForTesting) {
      console.warn(error.stack);
    }
    throw error;
  }
  return condition;
}

/**
 * Note: This method is deprecated. Use the equivalent method in assert_ts.ts
 * instead.
 * Call this from places in the code that should never be reached.
 *
 * For example, handling all the values of enum with a switch() like this:
 *
 *   function getValueFromEnum(enum) {
 *     switch (enum) {
 *       case ENUM_FIRST_OF_TWO:
 *         return first
 *       case ENUM_LAST_OF_TWO:
 *         return last;
 *     }
 *     assertNotReached();
 *     return document;
 *   }
 *
 * This code should only be hit in the case of serious programmer error or
 * unexpected input.
 *
 * @param {string=} message A message to show when this is hit.
 * @closurePrimitive {asserts.fail}
 */
function assertNotReached(message) {
  assert(false, message || 'Unreachable code hit');
}

/**
 * @param {*} value The value to check.
 * @param {function(new: T, ...)} type A user-defined constructor.
 * @param {string=} message A message to show when this is hit.
 * @return {T}
 * @template T
 */
function assertInstanceof(value, type, message) {
  // We don't use assert immediately here so that we avoid constructing an error
  // message if we don't have to.
  if (!(value instanceof type)) {
    assertNotReached(
        message ||
        'Value ' + value + ' is not a[n] ' + (type.name || typeof type));
  }
  return value;
}

/**
 * Alias for document.getElementById. Found elements must be HTMLElements.
 * @param {string} id The ID of the element to find.
 * @return {HTMLElement} The found element or null if not found.
 */
function $(id) {
  // Disable getElementById restriction here, since we are instructing other
  // places to re-use the $() that is defined here.
  // eslint-disable-next-line no-restricted-properties
  const el = document.getElementById(id);
  return el ? assertInstanceof(el, HTMLElement) : null;
}

/**
 * Return the first ancestor for which the {@code predicate} returns true.
 * @param {Node} node The node to check.
 * @param {function(Node):boolean} predicate The function that tests the
 *     nodes.
 * @param {boolean=} includeShadowHosts
 * @return {Node} The found ancestor or null if not found.
 */
function findAncestor(node, predicate, includeShadowHosts) {
  while (node !== null) {
    if (predicate(node)) {
      break;
    }
    node = includeShadowHosts && node instanceof ShadowRoot ? node.host :
                                                              node.parentNode;
  }
  return node;
}

console.warn('crbug/1173575, non-JS module files deprecated.');
</script>
  <script>// Copyright 2017 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

// This is the shared code for security interstitials. It is used for both SSL
// interstitials and Safe Browsing interstitials.

/**
 * @typedef {{
 *   dontProceed: function(),
 *   proceed: function(),
 *   showMoreSection: function(),
 *   openHelpCenter: function(),
 *   openDiagnostic: function(),
 *   reload: function(),
 *   openDateSettings: function(),
 *   openLogin: function(),
 *   doReport: function(),
 *   dontReport: function(),
 *   openReportingPrivacy: function(),
 *   openWhitepaper: function(),
 *   reportPhishingError: function(),
 * }}
 */
// eslint-disable-next-line no-var
var certificateErrorPageController;

// Should match security_interstitials::SecurityInterstitialCommand
/** @enum {number} */
const SecurityInterstitialCommandId = {
  CMD_DONT_PROCEED: 0,
  CMD_PROCEED: 1,
  // Ways for user to get more information
  CMD_SHOW_MORE_SECTION: 2,
  CMD_OPEN_HELP_CENTER: 3,
  CMD_OPEN_DIAGNOSTIC: 4,
  // Primary button actions
  CMD_RELOAD: 5,
  CMD_OPEN_DATE_SETTINGS: 6,
  CMD_OPEN_LOGIN: 7,
  // Safe Browsing Extended Reporting
  CMD_DO_REPORT: 8,
  CMD_DONT_REPORT: 9,
  CMD_OPEN_REPORTING_PRIVACY: 10,
  CMD_OPEN_WHITEPAPER: 11,
  // Report a phishing error.
  CMD_REPORT_PHISHING_ERROR: 12,
  // Open enhanced protection settings.
  CMD_OPEN_ENHANCED_PROTECTION_SETTINGS: 13,
};

const HIDDEN_CLASS = 'hidden';

/**
 * A convenience method for sending commands to the parent page.
 * @param {SecurityInterstitialCommandId} cmd  The command to send.
 */
function sendCommand(cmd) {
  if (window.certificateErrorPageController) {
    switch (cmd) {
      case SecurityInterstitialCommandId.CMD_DONT_PROCEED:
        certificateErrorPageController.dontProceed();
        break;
      case SecurityInterstitialCommandId.CMD_PROCEED:
        certificateErrorPageController.proceed();
        break;
      case SecurityInterstitialCommandId.CMD_SHOW_MORE_SECTION:
        certificateErrorPageController.showMoreSection();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_HELP_CENTER:
        certificateErrorPageController.openHelpCenter();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_DIAGNOSTIC:
        certificateErrorPageController.openDiagnostic();
        break;
      case SecurityInterstitialCommandId.CMD_RELOAD:
        certificateErrorPageController.reload();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_DATE_SETTINGS:
        certificateErrorPageController.openDateSettings();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_LOGIN:
        certificateErrorPageController.openLogin();
        break;
      case SecurityInterstitialCommandId.CMD_DO_REPORT:
        certificateErrorPageController.doReport();
        break;
      case SecurityInterstitialCommandId.CMD_DONT_REPORT:
        certificateErrorPageController.dontReport();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_REPORTING_PRIVACY:
        certificateErrorPageController.openReportingPrivacy();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_WHITEPAPER:
        certificateErrorPageController.openWhitepaper();
        break;
      case SecurityInterstitialCommandId.CMD_REPORT_PHISHING_ERROR:
        certificateErrorPageController.reportPhishingError();
        break;
      case SecurityInterstitialCommandId.CMD_OPEN_ENHANCED_PROTECTION_SETTINGS:
        certificateErrorPageController.openEnhancedProtectionSettings();
        break;
    }
    return;
  }
  // 
  window.domAutomationController.send(cmd);
  // 
  // 
}

/**
 * Call this to stop clicks on <a href="#"> links from scrolling to the top of
 * the page (and possibly showing a # in the link).
 */
function preventDefaultOnPoundLinkClicks() {
  const anchors = document.body.querySelectorAll('a[href="#"]');
  for (const anchor of anchors) {
    anchor.addEventListener('click', e => e.preventDefault());
  }
}

// 

// 
</script>
  <script>// Copyright 2021 The Brave Authors. All rights reserved.
// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this file,
// you can obtain one at https://mozilla.org/MPL/2.0/.

// Should match ipfs::IPFSOnboardingPage::IPFSOnboardingCommandId
/** @enum {number} */
const IPFSOnboardingCommandId = {
  USE_LOCAL_NODE: 0,
  USE_PUBLIC_GATEWAY: 1,
  LEARN_MORE: 2,
  OPEN_SETTINGS: 3
};

// Should match ipfs::IPFSOnboardingPage::IPFSOnboardingResponse
/** @enum {number} */
const IPFSOnboardingResponse = {
  LOCAL_NODE_ERROR: 0,
  LOCAL_NODE_LAUNCHED: 1,
  NO_PEERS_AVAILABLE: 2,
  NO_PEERS_LIMIT: 3,
  INSTALLATION_ERROR: 4,
  THEME_CHANGED_DARK: 5,
  THEME_CHANGED_LIGHT: 6
};

const setTheme = (theme) => {
  document.body.className = `${theme.toLowerCase()}`;
}

function setup() {
  // No local node option on Android
  if ('' == 'Android') {
    $('local-node-box').style.display = 'none'
    $('footer').style.display = 'none'
  }

  $('local-node-button').addEventListener('click', function() {
    $('local-node-button').textContent = '正在安装…'
    $('error-container').className = 'error-container-hidden'
    $('local-node-button').className = 'button'
    sendCommand(IPFSOnboardingCommandId.USE_LOCAL_NODE);
  });

  $('public-gateway-button').addEventListener('click', function() {
    sendCommand(IPFSOnboardingCommandId.USE_PUBLIC_GATEWAY);
  });

  $('learn-more').addEventListener('click', function() {
    sendCommand(IPFSOnboardingCommandId.LEARN_MORE);
  });

  $('open-settings').addEventListener('click', function() {
    sendCommand(IPFSOnboardingCommandId.OPEN_SETTINGS);
  });
}

document.addEventListener('DOMContentLoaded', setup);

function showErrorMessage(text) {
  $('error-container').textContent = text
  $('error-container').className = 'error-container-visible'
}

function handleCommand(code, text) {
  if (code == IPFSOnboardingResponse.LOCAL_NODE_ERROR) {
    showErrorMessage('IPFS 服务启动错误')
    $('local-node-button').textContent = '重试'
  } else if (code == IPFSOnboardingResponse.THEME_CHANGED_DARK) {
    setTheme("dark")
  } else if (code == IPFSOnboardingResponse.THEME_CHANGED_LIGHT) {
    setTheme("light")
  } else if (code == IPFSOnboardingResponse.LOCAL_NODE_LAUNCHED) {
    $('local-node-button').textContent = '寻找对等体....'
  } else if (code == IPFSOnboardingResponse.NO_PEERS_AVAILABLE) {
    showErrorMessage('没有可用的对等项，正在重试… ({value} attemps left)'.replace('{value}', text))
  } else if (code == IPFSOnboardingResponse.NO_PEERS_LIMIT) {
    showErrorMessage('我们已超出尝试次数的上限，请稍后再试。')
    $('local-node-button').textContent = '重试'
    $('local-node-button').className = 'button button-retry'
  } else if (code == IPFSOnboardingResponse.INSTALLATION_ERROR) {
    showErrorMessage('更新期间出错。')
    $('local-node-button').textContent = '重试'
    $('local-node-button').className = 'button button-retry'
  }
  return true
}

function messageHandler (event) {
  if (event.type !== 'message' || event.origin !== document.location.origin) {
    return false
  }
  
  if (!event.data || event.data.command !== 'ipfs')
    return false
    
  if (isNaN(parseInt(event.data.code)) ||
      (event.data.value !== '' && isNaN(parseInt(event.data.value)))) {
    return false;
  }
  return handleCommand(event.data.code, event.data.value);
}

window.addEventListener("message", messageHandler, false);

// for testing purposes
if (typeof module !== 'undefined') {
  module.exports = messageHandler
}
</script>
</head>
<body id="body" class="light">
  <div class="interstitial-wrapper">
    <div id="main-content">
      <div class="header-logo">
        <img alt="header brave logo" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjE5IiBoZWlnaHQ9IjE3NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMTUuMzU0IiBjeT0iOTAuNDQyIiByPSI4NC41NzgiIHN0cm9rZT0iI0RBRENFOCIgc3Ryb2tlLXdpZHRoPSIuODc2Ii8+PGNpcmNsZSBjeD0iMTE1LjM1NCIgY3k9IjkwLjQ0MiIgcj0iNjYuMTcyIiBzdHJva2U9IiNEQURDRTgiIHN0cm9rZS13aWR0aD0iLjg3NiIvPjxjaXJjbGUgY3g9IjExNS4xIiBjeT0iOTAuMjA0IiByPSI0OC42NDMiIHN0cm9rZT0iI0RBRENFOCIgc3Ryb2tlLXdpZHRoPSIuODc2Ii8+PHBhdGggZD0iTTYuMjk2IDEwOS41NjdsMzUuNzE3IDIwLjYyMiAzNS43MTctMjAuNjIyVjY4LjMyNGwtMzUuNzE3LTIwLjYyTDYuMjk2IDY4LjMyNnY0MS4yNDF6IiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIi8+PHBhdGggZD0iTTM4LjMyNiA1Mi42NzFMMTIuNDMgNjcuNjIzYy4wNTIuNDYuMDUyLjkyNCAwIDEuMzg0bDI1Ljg5OCAxNC45NTFhNi4xODYgNi4xODYgMCAwMTcuMzQ2IDBsMjUuODk4LTE0Ljk1MWE2LjE3OSA2LjE3OSAwIDAxMC0xLjM4NEw0NS42NzQgNTIuNjdhNi4xODYgNi4xODYgMCAwMS03LjM0NiAwaC0uMDAzem0zNS43MzIgMjAuNDY2TDQ4LjEzMyA4OC4yNTVhNi4xODcgNi4xODcgMCAwMS0zLjY3MyA2LjM2MmwuMDI5IDI5LjczN2MuNDI0LjE4NS44MjYuNDE3IDEuMTk4LjY5MWwyNS44OTgtMTQuOTUxYTYuMTg2IDYuMTg2IDAgMDEzLjY3My02LjM2MlY3My44MjlhNi4xODYgNi4xODYgMCAwMS0xLjE5OS0uNjkyaC0uMDAxem0tNjQuMDkuMTY2YTYuMTgyIDYuMTgyIDAgMDEtMS4xOTguNjkydjI5LjkwM2E2LjE4NiA2LjE4NiAwIDAxMy42NzMgNi4zNjJsMjUuODk2IDE0Ljk1MWE2LjE2NyA2LjE2NyAwIDAxMS4xOTktLjY5MlY5NC42MTZhNi4xODcgNi4xODcgMCAwMS0zLjY3My02LjM2Mkw5Ljk2OCA3My4zMDJ6IiBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIi8+PHBhdGggZD0iTTQyLjAxMyAxMzAuMTg5bDM1LjcxOC0yMC42MjJWNjguMzI0TDQyLjAxMyA4OC45NDZ2NDEuMjQzeiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUxIi8+PHBhdGggZD0iTTQyLjAxNCAxMzAuMTg5Vjg4Ljk0Nkw2LjI5NSA2OC4zMjR2NDEuMjQzbDM1LjcxOCAyMC42MjJ6IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4wMzkiLz48cGF0aCBkPSJNNi4yOTYgNjguMzI0bDM1LjcxNyAyMC42MjJMNzcuNzMgNjguMzI0IDQyLjAxMyA0Ny43MDMgNi4yOTYgNjguMzI0eiIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMTMiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIxNS42MzIgNjguNGwxLjg2NS00LjU3MnMtMi4zNzMtMi41NC01LjI1NS01LjQxOGMtMi44ODItMi44OC04Ljk4NS0xLjE4Ni04Ljk4NS0xLjE4NmwtNi45NS03Ljg3NmgtMjQuNDEybC02Ljk1MSA3Ljg3NnMtNi4xMDItMS42OTMtOC45ODQgMS4xODZjLTIuODgyIDIuODc4LTUuMjU2IDUuNDE4LTUuMjU2IDUuNDE4bDEuODY1IDQuNTcyLTIuMzczIDYuNzc0czYuOTggMjYuNDA4IDcuNzk4IDI5LjYzM2MxLjYxIDYuMzUgMi43MTIgOC44MDUgNy4yODkgMTIuMDIzIDQuNTc4IDMuMjE3IDEyLjg4NCA4LjgwNSAxNC4yNDEgOS42NTIgMS4zNTYuODQ3IDMuMDUxIDIuMjg5IDQuNTc3IDIuMjg5IDEuNTI2IDAgMy4yMjEtMS40NDIgNC41NzctMi4yODkgMS4zNTYtLjg0NyA5LjY2My02LjQzNSAxNC4yNC05LjY1MiA0LjU3Ny0zLjIxOCA1LjY3OS01LjY3MyA3LjI5LTEyLjAyMy44MTctMy4yMjUgNy43OTgtMjkuNjMzIDcuNzk4LTI5LjYzM2wtMi4zNzQtNi43NzR6IiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXIpIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOTIuNzQ3IDYzLjY1OWMxLjAxNyAwIDguNTYxLTEuNDQgOC41NjEtMS40NHM4Ljk0IDEwLjc5NiA4Ljk0IDEzLjEwM2MwIDEuOTA3LS43NjkgMi42NTQtMS42NzUgMy41MzMtLjE4OS4xODQtLjM4NS4zNzQtLjU4MS41ODJsLTYuNzAzIDcuMTFjLS4wNjYuMDctLjE0LjE0NS0uMjE5LjIyNC0uNjY5LjY3Mi0xLjY1NCAxLjY2MS0uOTU5IDMuMzA1bC4xNDMuMzM1Yy43NjIgMS43OCAxLjcwMyAzLjk3OC41MDUgNi4yMDYtMS4yNzQgMi4zNy0zLjQ1NiAzLjk1MS00Ljg1NSAzLjY4OS0xLjM5OS0uMjYxLTQuNjgzLTEuOTc2LTUuODkxLTIuNzYtMS4yMDgtLjc4Mi01LjAzNi0zLjkzNi01LjAzNi01LjE0MyAwLTEuMDA2IDIuNzUzLTIuNjggNC4wOTEtMy40OTQuMjY2LS4xNjIuNDc2LS4yOS41OTctLjM3LjEzOC0uMDk0LjM2OS0uMjM3LjY1My0uNDEzIDEuMjIxLS43NTggMy40MjYtMi4xMjYgMy40ODEtMi43MzMuMDY4LS43NDguMDQzLS45NjctLjk0Mi0yLjgxNS0uMjA5LS4zOTMtLjQ1NC0uODE0LS43MDctMS4yNDktLjkzNy0xLjYxLTEuOTg2LTMuNDE0LTEuNzU0LTQuNzA1LjI2Mi0xLjQ1OSAyLjU1LTIuMjk1IDQuNDg4LTMuMDAzLjI0Mi0uMDg4LjQ3OC0uMTc1LjcwNS0uMjYuNTY1LS4yMTQgMS4yNzYtLjQ4IDIuMDE4LS43NTcgMS45MzUtLjcyNCA0LjA4NC0xLjUyOCA0LjQzOS0xLjY5Mi40OTEtLjIyNi4zNjQtLjQ0MS0xLjEyMi0uNTgyLS4xOTctLjAxOC0uNDQxLS4wNDQtLjcyMi0uMDc0LTEuODQtLjE5NS01LjIzMy0uNTU1LTYuODgzLS4wOTYtLjMyNC4wOS0uNjg4LjE4OS0xLjA2OS4yOTItMS44NTQuNTAxLTQuMTI1IDEuMTE1LTQuMzQzIDEuNDctLjAzOC4wNjItLjA3Ni4xMTUtLjExMS4xNjUtLjIwOS4yOTYtLjM0NS40OS0uMTE0IDEuNzUuMDY5LjM3NC4yMSAxLjExMi4zODUgMi4wMjQuNTEyIDIuNjcxIDEuMzExIDYuODM3IDEuNDExIDcuNzczLjAxNC4xMzEuMDMuMjU3LjA0NS4zNzkuMTI4IDEuMDQ0LjIxMyAxLjczOS0xLjAwMSAyLjAxNmwtLjMxOC4wNzNjLTEuMzY5LjMxNC0zLjM3OC43NzQtNC4xMDMuNzc0LS43MjYgMC0yLjczNi0uNDYtNC4xMDYtLjc3NGwtLjMxNS0uMDczYy0xLjIxNS0uMjc3LTEuMTI5LS45NzItMS4wMDEtMi4wMTYuMDE1LS4xMjIuMDMtLjI0OC4wNDQtLjM3OS4xMDEtLjkzNy45MDItNS4xMTQgMS40MTQtNy43ODQuMTc0LS45MDcuMzE0LTEuNjQuMzgzLTIuMDE0LjIzLTEuMjYuMDk0LTEuNDUzLS4xMTQtMS43NDlhMi43NjIgMi43NjIgMCAwMS0uMTExLS4xNjZjLS4yMTktLjM1NC0yLjQ5LS45NjgtNC4zNDMtMS40Ny0uMzgyLS4xMDItLjc0NS0uMi0xLjA3LS4yOTEtMS42NS0uNDYtNS4wNDItLjEtNi44ODIuMDk2LS4yODEuMDMtLjUyNS4wNTYtLjcyMi4wNzQtMS40ODYuMTQxLTEuNjEzLjM1Ni0xLjEyMi41ODIuMzU0LjE2MyAyLjUwMi45NjcgNC40MzcgMS42OTEuNzQyLjI3OCAxLjQ1NC41NDQgMi4wMi43NTguMjI2LjA4NS40NjMuMTcyLjcwNS4yNiAxLjkzOC43MDggNC4yMjUgMS41NDQgNC40ODcgMy4wMDMuMjMzIDEuMjkxLS44MTYgMy4wOTQtMS43NTMgNC43MDUtLjI1My40MzUtLjQ5OS44NTYtLjcwOCAxLjI1LS45ODQgMS44NDctMS4wMSAyLjA2Ni0uOTQyIDIuODE0LjA1Ni42MDYgMi4yNTkgMS45NzQgMy40OCAyLjczMi4yODUuMTc3LjUxNi4zMi42NTQuNDEzLjEyMi4wODIuMzMxLjIxLjU5Ny4zNzEgMS4zMzguODEzIDQuMDkyIDIuNDg4IDQuMDkyIDMuNDk0IDAgMS4yMDctMy44MjkgNC4zNi01LjAzNiA1LjE0NC0xLjIwOC43ODMtNC40OTMgMi40OTgtNS44OTEgMi43NTktMS4zOTkuMjYyLTMuNTgyLTEuMzItNC44NTYtMy42OS0xLjE5Ny0yLjIyNy0uMjU3LTQuNDI0LjUwNS02LjIwNWwuMTQzLS4zMzVjLjY5Ni0xLjY0NC0uMjktMi42MzMtLjk1OS0zLjMwNS0uMDc4LS4wNzktLjE1Mi0uMTUzLS4yMTktLjIyNGwtNi43MDMtNy4xMWExOC4yMzQgMTguMjM0IDAgMDAtLjU4MS0uNTgyYy0uOTA1LS44NzktMS42NzQtMS42MjYtMS42NzQtMy41MzMgMC0yLjMwNyA4Ljk0LTEzLjEwMiA4Ljk0LTEzLjEwMnM3LjU0NCAxLjQzOSA4LjU2MSAxLjQzOWMuODEyIDAgMi4zNzktLjU0IDQuMDEzLTEuMTAxLjQxMy0uMTQyLjgzMS0uMjg2IDEuMjQyLS40MjMgMi4wMzUtLjY3NyAzLjM5MS0uNjgyIDMuMzkxLS42ODJzMS4zNTYuMDA1IDMuMzkuNjgyYy40MTEuMTM3LjgyOS4yOCAxLjI0My40MjMgMS42MzQuNTYyIDMuMjAxIDEuMSA0LjAxMyAxLjF6bS0xLjI5NSAzOC4xODNjMS41OTQuODIxIDIuNzI2IDEuNDAzIDMuMTU0IDEuNjcxLjU1My4zNDYuMjE1Ljk5OC0uMjg5IDEuMzU0LS41MDQuMzU2LTcuMjc4IDUuNTk2LTcuOTM2IDYuMTc1bC0uMjY2LjIzOGMtLjYzMy41NzEtMS40NDEgMS4yOTgtMi4wMTQgMS4yOTgtLjU3MyAwLTEuMzgyLS43MjgtMi4wMTUtMS4yOThhMjkuMjQgMjkuMjQgMCAwMC0uMjY2LS4yMzhjLS42NTctLjU3OS03LjQzMi01LjgxOS03LjkzNi02LjE3NS0uNTA0LS4zNTYtLjg0MS0xLjAwOC0uMjg4LTEuMzU0LjQyOC0uMjY4IDEuNTYtLjg1MSAzLjE1Ny0xLjY3MmwxLjUxNy0uNzgyYzIuMzg5LTEuMjM1IDUuMzY2LTIuMjg1IDUuODMxLTIuMjg1LjQ2NCAwIDMuNDQyIDEuMDUgNS44MzEgMi4yODVsMS41Mi43ODN6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMDMuMjU3IDU3LjIyNGwtNi45NS03Ljg3NmgtMjQuNDEybC02Ljk1MSA3Ljg3NnMtNi4xMDItMS42OTMtOC45ODQgMS4xODZjMCAwIDguMTM3LS43MzQgMTAuOTM0IDMuODEgMCAwIDcuNTQ0IDEuNDM5IDguNTYxIDEuNDM5IDEuMDE3IDAgMy4yMjEtLjg0NyA1LjI1NS0xLjUyNCAyLjAzNS0uNjc3IDMuMzkxLS42ODIgMy4zOTEtLjY4MnMxLjM1Ni4wMDUgMy4zOS42ODJjMi4wMzUuNjc3IDQuMjM4IDEuNTI0IDUuMjU2IDEuNTI0IDEuMDE3IDAgOC41NjEtMS40NCA4LjU2MS0xLjQ0IDIuNzk3LTQuNTQzIDEwLjkzNC0zLjgxIDEwLjkzNC0zLjgxLTIuODgyLTIuODc4LTguOTg1LTEuMTg1LTguOTg1LTEuMTg1eiIgZmlsbD0idXJsKCNwYWludDNfbGluZWFyKSIvPjxtYXNrIGlkPSJhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIxNTUiIHk9IjQ5IiB3aWR0aD0iNTgiIGhlaWdodD0iMTUiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAzLjI1NyA1Ny4yMjRsLTYuOTUtNy44NzZoLTI0LjQxMmwtNi45NTEgNy44NzZzLTYuMTAyLTEuNjkzLTguOTg0IDEuMTg2YzAgMCA4LjEzNy0uNzM0IDEwLjkzNCAzLjgxIDAgMCA3LjU0NCAxLjQzOSA4LjU2MSAxLjQzOSAxLjAxNyAwIDMuMjIxLS44NDcgNS4yNTUtMS41MjQgMi4wMzUtLjY3NyAzLjM5MS0uNjgyIDMuMzkxLS42ODJzMS4zNTYuMDA1IDMuMzkuNjgyYzIuMDM1LjY3NyA0LjIzOCAxLjUyNCA1LjI1NiAxLjUyNCAxLjAxNyAwIDguNTYxLTEuNDQgOC41NjEtMS40NCAyLjc5Ny00LjU0MyAxMC45MzQtMy44MSAxMC45MzQtMy44MS0yLjg4Mi0yLjg3OC04Ljk4NS0xLjE4NS04Ljk4NS0xLjE4NXoiIGZpbGw9IiNmZmYiLz48L21hc2s+PHBhdGggZD0iTTEyNS4wNiA5Mi40NDdoLTcuNTMxdjcuNzE4aC0zLjk1MnYtNy43MThoLTcuNTMydi0zLjU4aDcuNTMyVjgxLjE1aDMuOTUydjcuNzE4aDcuNTMxdjMuNTh6IiBmaWxsPSIjMDAwIi8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iNi4yOTYiIHkxPSI4OC45NDYiIHgyPSI3Ny43MzEiIHkyPSI4OC45NDYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjNEE5RUExIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSI4Ljc3IiB5MT0iODguOTQxIiB4Mj0iNzUuMjU3IiB5Mj0iODguOTQxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzYzRDNENyIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iMTUwLjE5NiIgeTE9IjEyOS4zMzEiIHgyPSIyMTguMDA2IiB5Mj0iMTI5LjMzMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNGNTAiLz48c3RvcCBvZmZzZXQ9Ii40MSIgc3RvcC1jb2xvcj0iI0Y1MCIvPjxzdG9wIG9mZnNldD0iLjU4MiIgc3RvcC1jb2xvcj0iI0ZGMjAwMCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGMjAwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iMTU3LjE2OSIgeTE9IjYzLjYwNiIgeDI9IjIxMi4yNDIiIHkyPSI2My42MDYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBzdG9wLWNvbG9yPSIjRkY0NTJBIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYyMDAwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+">
      </div>
      <div id="main-message">
        <span class="heading">
          设置您的 IPFS 首选项
        </span>
        <p class="copy">
          IPFS（行星际文件系统）是用于对等数据存储和传递的公共网络。该协议具有与 HTTP(S) 不同的隐私考量。
          <a id="learn-more" class="info-link" href="">
            了解更多
          </a>
        </p>
      </div>
    </div>
    <div class="nav-wrapper">
      <div class="control-box" id="local-node-box">
        <div class="button-wrapper">
          <button class="button button-retry" id="local-node-button">重试</button>
        <div id="error-container" class="error-container-visible">更新期间出错。</div>
        </div>
        <div class="copy-wrapper">
          <p>您的计算机参与了公共网络，但您的 IP 地址和您要求提供或提供的任何内容都可能被泄露。您通过 IPFS 请求的内容在提供给您之前会经过验证。网络请求不得使用浏览器代理和 DNS 设置。</p>
        </div>
      </div>
      <div class="control-box">
        <div class="button-wrapper">
          <button class="button" id="public-gateway-button">
            使用公共网关
          </button>
        </div>
        <div class="copy-wrapper">
          <p>保护您潜在的第三方观察者（而不是公共网关运营商）所请求的 IP 地址和内容。网关运营商负责确保通过网关提供给您的内容是您所请求的内容。另外，您的计算机不参与公共 IPFS 网络。</p>
        </div>
      </div>
    </div>
    <div class="footer" id="footer">
      <p class="copy">
        您可以再次更改您的首选项：
        <a id="open-settings" class="info-link" href="">
          设置.
        </a>
      </p>
    </div>
  </div>
  <div class="background-container">
    <div class="background"></div>
  </div>

<style>/* Copyright 2014 The Chromium Authors
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file. */

/* This file is dynamically processed by a C++ data source handler to fill in
 * some per-platform/locale styles that dramatically alter the page. This is
 * done to reduce flicker, as JS may not run before the page is rendered.
 *
 * There are two ways to include this stylesheet:
 * 1. via its chrome://resources/ URL in HTML, i.e.:
 *
 *   <link rel="stylesheet" href="chrome://resources/css/text_defaults.css">
 *
 * 2. via the webui::AppendWebUICSSTextDefaults() method to directly append it
 * to an HTML string.
 * Otherwise its placeholders won't be expanded. */

body {
  font-family: 'Segoe UI',Arial,'Microsoft Yahei',sans-serif;
  font-size: 75%;
}

button {
  font-family: 'Segoe UI',Arial,'Microsoft Yahei',sans-serif;
}
</style><script>// Copyright 2012 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

/**
 * @fileoverview
 * NOTE: This file is deprecated, and provides only the minimal LoadTimeData
 * functions for places in the code still not using JS modules. Use
 * load_time_data.m.js in all new code.
 *
 * This file defines a singleton which provides access to all data
 * that is available as soon as the page's resources are loaded (before DOM
 * content has finished loading). This data includes both localized strings and
 * any data that is important to have ready from a very early stage (e.g. things
 * that must be displayed right away).
 *
 * Note that loadTimeData is not guaranteed to be consistent between page
 * refreshes (https://crbug.com/740629) and should not contain values that might
 * change if the page is re-opened later.
 */

/** @type {!LoadTimeData} */
// eslint-disable-next-line no-var
var loadTimeData;

class LoadTimeData {
  constructor() {
    /** @type {?Object} */
    this.data_ = null;
  }

  /**
   * Sets the backing object.
   *
   * Note that there is no getter for |data_| to discourage abuse of the form:
   *
   *     var value = loadTimeData.data()['key'];
   *
   * @param {Object} value The de-serialized page data.
   */
  set data(value) {
    expect(!this.data_, 'Re-setting data.');
    this.data_ = value;
  }

  /**
   * @param {string} id An ID of a value that might exist.
   * @return {boolean} True if |id| is a key in the dictionary.
   */
  valueExists(id) {
    return id in this.data_;
  }

  /**
   * Fetches a value, expecting that it exists.
   * @param {string} id The key that identifies the desired value.
   * @return {*} The corresponding value.
   */
  getValue(id) {
    expect(this.data_, 'No data. Did you remember to include strings.js?');
    const value = this.data_[id];
    expect(typeof value !== 'undefined', 'Could not find value for ' + id);
    return value;
  }

  /**
   * As above, but also makes sure that the value is a string.
   * @param {string} id The key that identifies the desired string.
   * @return {string} The corresponding string value.
   */
  getString(id) {
    const value = this.getValue(id);
    expectIsType(id, value, 'string');
    return /** @type {string} */ (value);
  }

  /**
   * Returns a formatted localized string where $1 to $9 are replaced by the
   * second to the tenth argument.
   * @param {string} id The ID of the string we want.
   * @param {...(string|number)} var_args The extra values to include in the
   *     formatted output.
   * @return {string} The formatted string.
   */
  getStringF(id, var_args) {
    const value = this.getString(id);
    if (!value) {
      return '';
    }

    const args = Array.prototype.slice.call(arguments);
    args[0] = value;
    return this.substituteString.apply(this, args);
  }

  /**
   * Returns a formatted localized string where $1 to $9 are replaced by the
   * second to the tenth argument. Any standalone $ signs must be escaped as
   * $$.
   * @param {string} label The label to substitute through.
   *     This is not an resource ID.
   * @param {...(string|number)} var_args The extra values to include in the
   *     formatted output.
   * @return {string} The formatted string.
   */
  substituteString(label, var_args) {
    const varArgs = arguments;
    return label.replace(/\$(.|$|\n)/g, function(m) {
      expect(m.match(/\$[$1-9]/), 'Unescaped $ found in localized string.');
      return m === '$$' ? '$' : varArgs[m[1]];
    });
  }

  /**
   * As above, but also makes sure that the value is a boolean.
   * @param {string} id The key that identifies the desired boolean.
   * @return {boolean} The corresponding boolean value.
   */
  getBoolean(id) {
    const value = this.getValue(id);
    expectIsType(id, value, 'boolean');
    return /** @type {boolean} */ (value);
  }

  /**
   * As above, but also makes sure that the value is an integer.
   * @param {string} id The key that identifies the desired number.
   * @return {number} The corresponding number value.
   */
  getInteger(id) {
    const value = this.getValue(id);
    expectIsType(id, value, 'number');
    expect(value === Math.floor(value), 'Number isn\'t integer: ' + value);
    return /** @type {number} */ (value);
  }

  /**
   * Override values in loadTimeData with the values found in |replacements|.
   * @param {Object} replacements The dictionary object of keys to replace.
   */
  overrideValues(replacements) {
    expect(
        typeof replacements === 'object',
        'Replacements must be a dictionary object.');
    for (const key in replacements) {
      this.data_[key] = replacements[key];
    }
  }
}

/**
 * Checks condition, throws error message if expectation fails.
 * @param {*} condition The condition to check for truthiness.
 * @param {string} message The message to display if the check fails.
 */
function expect(condition, message) {
  if (!condition) {
    throw new Error(
        'Unexpected condition on ' + document.location.href + ': ' + message);
  }
}

/**
 * Checks that the given value has the given type.
 * @param {string} id The id of the value (only used for error message).
 * @param {*} value The value to check the type on.
 * @param {string} type The type we expect |value| to be.
 */
function expectIsType(id, value, type) {
  expect(
      typeof value === type, '[' + value + '] (' + id + ') is not a ' + type);
}

expect(!loadTimeData, 'should only include this file once');
loadTimeData = new LoadTimeData();

// Expose |loadTimeData| directly on |window|, since within a JS module the
// scope is local and not all files have been updated to import the exported
// |loadTimeData| explicitly.
window.loadTimeData = loadTimeData;

console.warn('crbug/1173575, non-JS module files deprecated.');
</script><script>loadTimeData.data = {"braveTheme":"light","fontfamily":"'Segoe UI',Arial,'Microsoft Yahei',sans-serif","fontsize":"75%","footerText":"您可以再次更改您的首选项：","heading":"设置您的 IPFS 首选项","installationError":"更新期间出错。","installationText":"正在安装…","language":"zh","learnMore":"了解更多","localNodeButton":"使用 Brave 本地 IPFS 节点","localNodeError":"IPFS 服务启动错误","localNodeText":"您的计算机参与了公共网络，但您的 IP 地址和您要求提供或提供的任何内容都可能被泄露。您通过 IPFS 请求的内容在提供给您之前会经过验证。网络请求不得使用浏览器代理和 DNS 设置。","os":"","peersError":"没有可用的对等项，正在重试… ({value} attemps left)","primaryParagraph":"IPFS（行星际文件系统）是用于对等数据存储和传递的公共网络。该协议具有与 HTTP(S) 不同的隐私考量。","publicGatewayButton":"使用公共网关","publicGatewayText":"保护您潜在的第三方观察者（而不是公共网关运营商）所请求的 IP 地址和内容。网关运营商负责确保通过网关提供给您的内容是您所请求的内容。另外，您的计算机不参与公共 IPFS 网络。","retryLimitPeersText":"我们已超出尝试次数的上限，请稍后再试。","retryText":"重试","settings":"设置","tabTitle":"IPFS 首选项","textdirection":"ltr","tryAgainText":"重试","watingPeersText":"寻找对等体...."};</script></body></html>
